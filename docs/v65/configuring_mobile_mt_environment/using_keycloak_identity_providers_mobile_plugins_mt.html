
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us" whc:version="22.0">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="description" content="When the Connections Mobile and Connections Plugin applications request OAuth tokens from Keycloak, they will first authenticate the user by calling the Keycloak authentication endpoint. By default, ..." /><meta charset="UTF-8" /><meta name="DC.rights.owner" content="(C) Copyright 2021" /><meta name="copyright" content="(C) Copyright 2021" /><meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" /><meta name="DC.relation" scheme="URI" content="../../v65/configuring_mobile_mt_environment/admin_mobile_mt.md" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="using-keycloak-identity-providers-with-mobile-and-plugins" /><title>Using Keycloak Identity Providers with Mobile and Plugins</title><!--  Generated with Oxygen version 23.1, build number 2021030117.  --><meta name="wh-path2root" content="../../" /><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /C:\Users\david.sayer\Documents\GitHub-test\connections_cloud_mt\mt\temp\webhelp-responsive\oxygen_dita_temp\v65\configuring_mobile_mt_environment?&gt;&lt;?workdir-uri file:/C:/Users/david.sayer/Documents/GitHub-test/connections_cloud_mt/mt/temp/webhelp-responsive/oxygen_dita_temp/v65/configuring_mobile_mt_environment/?&gt;&lt;?path2project ..\..\?&gt;&lt;?path2project-uri ../../?&gt;&lt;?path2rootmap-uri ../../?&gt;&lt;topic xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;1.2&#34; domains=&#34;(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)&#34; id=&#34;using-keycloak-identity-providers-with-mobile-and-plugins&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;topic:1;182:3&#34; specializations=&#34;&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;title:1;182:3&#34;&gt;Using Keycloak Identity Providers with Mobile and Plugins&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;body:1;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:1;182:3&#34;&gt;When the Connections Mobile and Connections Plugin applications request OAuth tokens from Keycloak, they will first authenticate the user by calling the Keycloak authentication endpoint. By default, Keycloak will display a user login form and optionally will provide a list of Identity Providers for which this user could choose to authenticate. However, in a Multi-Tenant environment, the tenant provider should either customize the login form to make it specific for this particular tenant that is logging in, or possibly route the login request to a tenant specific Identity Provider, which would perform the authentication of the user. In either of the cases however, Keycloak will need some sort of hint from the login request to understand which &#34;tenant&#34; this login should apply.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:2;182:3&#34;&gt;By default, there is no tenant information such as the hostname of the tenant embedded within the auth request made from the client apps to Keycloak. The apps make a REST call directly to the Keycloak server and provide only the minimum required information needed by an OAuth provider. For example, the apps would make a call similar to the following:&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;codeblock:1;182:3&#34;&gt;https://login.example.com/auth/realms/connmt/protocol/openid-connect/auth? response_type=code&amp;amp;code_challenge_method=S256&amp;amp;scope=openid%20offline_access&amp;amp;code_challenge=9aE4DTOwWk66U8Hh2k1TpSBelWggFnroXEkRmIbAAVY&amp;amp;redirect_uri=com.ibm.ibmscp://com.ibm.mobile.connections/token&amp;amp;client_id=connections_social_mobile&amp;amp;state=Q5t9rXggFR7VB0HyYOL2b_- vFMLlHPiO9OGRUE6O5a0&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:3;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;b:1;182:3&#34;&gt;Note:&lt;/b&gt; Keycloak recognizes a Keycloak unique parameter called kc_idp_hint. If Keycloak detects this parameter, it checks the value against its list of Identity Provider aliases, and if a match is found, the login request will skip the Keycloak login form and be routed directly to that identity provider.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:4;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;b:2;182:3&#34;&gt;Solution&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:5;182:3&#34;&gt;The Connections mobile server, mobile apps and plugins support additional custom parameters on the OAuth authentication URL.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:6;182:3&#34;&gt;These parameters must be added to the mobile-config.xml file on the Connections server, and then will be discovered by each of the applications during their login process. This XML comment describes the OAuthAuthorizationURL_Parameter value:&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;codeblock:2;182:3&#34;&gt;&amp;lt;!-- OAuthAuthorizationURL_Parameters: Optional. If custom request parameters are required on the OAuthAuthorizationURL request, add the parameters here. The mobile and plugins apps will append these parameters when requesting app and user authorization. Separate parameters using the &#34;&amp;amp;amp;&#34; string. This will be converted to a single &#34;&amp;amp;&#34; when used by the client apps.&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:7;182:3&#34;&gt;Parameter values support the following substitution tokens. If these tokens are used as part of the value for a given parameter, they will be replaced with a dynamic value at runtime. Supported substitution tokens:&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;ul:1;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:1;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:8;182:3&#34;&gt;{MT_HOSTNAME} = The fully qualified tenant specific hostname for this instance. For example, &#34;tenant.example.com&#34;.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:2;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:9;182:3&#34;&gt;{MT_ORGNAME} = The tenant org name for this instance. For example, if the MT_HOSTNAME is &#34;tenant.example.com&#34;, the&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:10;182:3&#34;&gt;For example: &amp;lt;OAuthAuthorizationURL_Parameters&amp;gt;parameter1=value1&amp;amp;parameter2={MT_ORGNAME}&amp;lt;/OAuthAuthorizationURL_Parameters&amp;gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:11;182:3&#34;&gt;The parameter name that is added could be something generic like mt_hostname={MT_HOSTNAME} or mt_org={MT_ORGNAME}. Or, if you are already assigning an Identity provider alias in Keycloak that exactly matches the tenant org name, then you could directly add the parameter &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;b:3;182:3&#34;&gt;kc_idp_hint= {MT_ORGNAME}&lt;/b&gt;. With this approach, there would not be a requirement for an NGINX or edge proxy rule to manipulate the tenant identity to the proper value required for kc_idp_hint.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:12;182:3&#34;&gt;To add tenant specific information to the authentication request, follow these steps:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;ol:1;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:3;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:13;182:3&#34;&gt;On the Connections server, edit the mobile-config.xml file located in the DMgr profile. Typically this file structure would be similar to /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/config/cells/mtdemo1Cell01/LotusConnections-config.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:4;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:14;182:3&#34;&gt;Find the key in the file called &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;i:1;182:3&#34;&gt;OAuthLogoutURL&lt;/i&gt;. Add a new line here and insert the following section. Note that the value is just an example and should be customized to your environment.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;ul:2;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:5;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:15;182:3&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;i:2;182:3&#34;&gt;OAuthAuthorizationURL_Parameters mt_org={MT_ORGNAME}/OAuthAuthorizationURL_Parameters&lt;/i&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:6;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:16;182:3&#34;&gt;Save the file&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:7;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:17;182:3&#34;&gt;Perform a Full Synchronization for all nodes using the WebSphere admin console&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:8;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:18;182:3&#34;&gt;Restart the mobile application using the WebSphere admin console&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:19;182:3&#34;&gt;If you are using the parameter kc_idp_hint directly, then no further steps should be necessary on the Keycloak side. However, if your Keycloak alias naming convention does not match the customer org name and/or you are using a different parameter name, it may be necessary to add an NGINX or proxy rule to modify the incoming auth requests.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:20;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;b:4;182:3&#34;&gt;Verifying the changes&lt;/b&gt; Once the changes have been made, do the following:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;ol:2;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:9;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:21;182:3&#34;&gt;Using a desktop browser and the hostname of one of your tenants, open this URL: https://tenant_org_hostname/mobile/homepage/SecurityConfiguration?debug=true Verify that the returned JSON includes the correct key and value for OAuthAuthorizationURL_Parameters.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;li:10;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:22;182:3&#34;&gt;Once #1 is checked, login to this tenant using a Connections Mobile app or Connections desktop plugin application to verify login works properly.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;p:23;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md&#34; xtrc=&#34;b:5;182:3&#34;&gt;IMPORTANT&lt;/b&gt; The behavior described in this article requires the Connections Mobile app version 6.5.5 or later, or the Connections plugins from late June 2020.&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;activities&#34; xtrc=&#34;topicref:25;51:25&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/mt_v65_md.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../../v65/configuring_mobile_mt_environment/admin_mobile_mt.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:22;44:92&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-hwc_ydw_wpb/t1/t2/t3/t4/t5/v65/mt_v65_md.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;Administering Connections Mobile&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;/topic&gt;" /><meta name="wh-source-relpath" content="v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.md" /><meta name="wh-out-relpath" content="v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.html" />
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css" />
    
    <link rel="stylesheet" href="../../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css" />
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/app/topic-page.css?buildId=2021030117" />
    
    
    <script type="text/javascript" src="../../oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"><!----></script>
    
    <script data-main="../../oxygen-webhelp/app/topic-page.js" src="../../oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/template/oxygen.css?buildId=2021030117" />
    <!-- Global site tag (gtag.js) - Google Analytics start-->
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-169645537-2" class="optanon-category-C0002-C0003-C0004-C0005"></script>
    <script type="text/plain" class="optanon-category-C0002">
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-169645537-2');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics end-->

    <script type="module" src="../../oxygen-webhelp/template/resources/js/custom-hcl.js"></script>
    <script type="module" src="../../oxygen-webhelp/template/resources/js/constants.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="${oxygen-webhelp-template-dir}/resources/css/custom-hcl.css" /> -->

    <!-- OneTrust Cookies Consent Notice start -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/99b8d579-c52a-43c9-ab7b-a35e60de7103/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="99b8d579-c52a-43c9-ab7b-a35e60de7103"></script>
    <script type="text/javascript">
        function OptanonWrapper() { }
    </script>
    <!-- OneTrust Cookies Consent Notice end -->

    <!-- twitter widget -->
    <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

    <body id="using-keycloak-identity-providers-with-mobile-and-plugins" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        <nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="https://www.hcltechsw.com/wps/portal/hclsw-home" style="vertical-align: unset;">
        <img width="150" height="50" src="https://help.hcltechsw.com/assets/images/HCL_Software_Logo_White.svg" alt="HCL Logo" target="_blank" />
    </a>
    <a href="https://help.hcltechsw.com/">
        <span id="brandName" class="title" style="vertical-align: middle; font-size: 16px; color:#ffffff;">Product Documentation</span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" style="color:#ffffff;" href="https://support.hcltechsw.com/csm?id=csm_index">Customer Support</a>
            </li>
        </ul>
    </div>
</nav>
        
        
        <header class="navbar navbar-default wh_header" whc:version="23.1">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    
                    <div class=" wh_publication_title "><a href="../../index.html">HCL Connections Product Documentation  </a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                <button type="button" data-target="#wh_top_menu_and_indexterms_link" id="wh_menu_mobile_button" data-toggle="collapse" class="navbar-toggler collapsed wh_toggle_button" aria-expanded="false" aria-label="Toggle menu" aria-controls="wh_top_menu_and_indexterms_link">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                <nav class=" wh_top_menu " aria-label="Menu Container"><ul xmlns:xhtml="http://www.w3.org/1999/xhtml" role="menubar" aria-label="Menu"><li role="menuitem" aria-haspopup="true" aria-expanded="false" class="has-children"><span id="kc_welcome-d573e29-mi" data-tocid="kc_welcome-d573e29" data-state="not-ready" class=" topicref " data-id="kc_welcome"><span class="title"><a href="../../v7/welcome/welcome_admin.html">HCL Connections MT v7.0 CH MSP Product Documentation</a></span></span></li><li role="menuitem" aria-haspopup="true" aria-expanded="false" class="has-children"><span id="kc_welcome-d573e256-mi" data-tocid="kc_welcome-d573e256" data-state="not-ready" class=" topicref " data-id="kc_welcome"><span class="title"><a href="../../v65/welcome_65/welcome_admin.html">HCL Connections MT v6.5 CH MSP Product Documentation</a></span></span></li></ul></nav>
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <!-- Search form -->
        <div xmlns:oxyf="http://www.oxygenxml.com/functions" xmlns="" class="custom-search-component"><div xmlns="http://www.w3.org/1999/xhtml" class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div></form>
            
            
            
        </div><div xmlns="http://www.w3.org/1999/xhtml" class="after-search">
    <div class="version-container">
        <select id="versions" class="custom-select custom-select-md lang-selector" data-toggle="tooltip" title="Select a version">
        </select>
    </div>
    <div class="language-container">
      <!--  <label class="lang-label" for="languages">Language:</label> -->
        <select id="languages" class="custom-select custom-select-md lang-selector" data-toggle="tooltip" title="Select a language">
        </select>  
    </div>
</div></div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol xmlns:html="http://www.w3.org/1999/xhtml" class="d-print-none"><li><span class="home"><a href="../../index.html"><span>Home</span></a></span></li><li><span class="topicref" data-id="kc_welcome"><span class="title"><a href="../../v65/welcome_65/welcome_admin.html">HCL Connections MT v6.5 CH MSP Product Documentation</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">Welcome to the HCL Connections MT CH MSP Product     Documentation site. HCL Connections is social networking software designed for the workplace.     Its features help you to establish dynamic networks that connect you to the people and     information you need to achieve your business goals.</p></span></span></span></li><li><span class="topicref" data-id="configuring-mobile-for-the-multi-tenant-environment"><span class="title"><a href="../../v65/configuring_mobile_mt_environment/config_mobile_mt_environ.html">Configuring Mobile for the Multi-Tenant environment</a></span></span></li><li><span class="topicref" data-id="administering-connections-mobile"><span class="title"><a href="../../v65/configuring_mobile_mt_environment/admin_mobile_mt.html">Administering Connections Mobile</a></span></span></li><li class="active"><span class="topicref" data-id="using-keycloak-identity-providers-with-mobile-and-plugins"><span class="title"><a href="../../v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.html">Using Keycloak Identity Providers with Mobile and Plugins</a></span></span></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader">
  </span></div>
                        
                        <!-- External resource link -->
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <!-- Expand/Collapse publishing TOC 
                             The menu button for mobile devices is copied in the output only when the publication TOC is available
                        -->
                        <button type="button" data-target="#wh_publication_toc" id="wh_toc_button" data-toggle="collapse" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        
                        <nav id="wh_publication_toc" class="collapse col-lg-3 col-md-3 col-sm-12 d-md-block d-print-none" aria-label="Table of Contents Container">
                            <div class=" wh_publication_toc " data-tooltip-position="hidden"><ul role="tree" aria-label="Table of Contents"><span class="expand-button-action-labels"><span id="button-expand-action" aria-label="Expand"></span><span id="button-collapse-action" aria-label="Collapse"></span><span id="button-pending-action" aria-label="Pending"></span></span><li role="treeitem" aria-expanded="true"><span data-tocid="kc_welcome-d573e256" class="topicref" data-id="kc_welcome" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action kc_welcome-d573e256-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/welcome_65/welcome_admin.html" id="kc_welcome-d573e256-link">HCL Connections MT v6.5 CH MSP Product Documentation</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">Welcome to the HCL Connections MT CH MSP Product     Documentation site. HCL Connections is social networking software designed for the workplace.     Its features help you to establish dynamic networks that connect you to the people and     information you need to achieve your business goals.</p></span></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><span data-tocid="tocId-d573e267" class="topicref" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/overview/welcome.html" id="tocId-d573e267-link">Overview</a></span></span></li><li role="treeitem"><span data-tocid="feature-differences-between-hcl-connections-mt-and-ibm-connections-d573e275" class="topicref" data-id="feature-differences-between-hcl-connections-mt-and-ibm-connections" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/overview/feature_diff_mt_and_cnx.html" id="feature-differences-between-hcl-connections-mt-and-ibm-connections-d573e275-link">Feature differences between HCL Connections MT and IBM Connections</a></span></span></li><li role="treeitem"><span data-tocid="system-requirements-d573e283" class="topicref" data-id="system-requirements" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/overview/sys_reqs.html" id="system-requirements-d573e283-link">System Requirements</a></span></span></li><li role="treeitem"><span data-tocid="known-issues-d573e291" class="topicref" data-id="known-issues" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/overview/known_issues.html" id="known-issues-d573e291-link">Known Issues</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="tocId-d573e299" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d573e299-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/downloading/HCL%20MT%20CH-MSP%20Downloading%20HCL%20Connections%20Multi-Tenant%20packages%20and%20Monthly%20releases.html" id="tocId-d573e299-link">Downloading HCL Connections Multi-Tenant packages, including Monthly Releases and Fix Lists</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="multi-tenant-dependencies-d573e323" class="topicref" data-id="multi-tenant-dependencies" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action multi-tenant-dependencies-d573e323-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/mt_dependencies/mt_dependencies.html" id="multi-tenant-dependencies-d573e323-link">Multi-Tenant Dependencies</a></span></span></li><li role="treeitem"><span data-tocid="installing-hcl-connections-65-cr1a-for-a-multi-tenant-environment-d573e347" class="topicref" data-id="installing-hcl-connections-65-cr1a-for-a-multi-tenant-environment" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/installing_mt_cp_docs/installing.html" id="installing-hcl-connections-65-cr1a-for-a-multi-tenant-environment-d573e347-link">Installing HCL Connections 6.5 CR1a for a Multi-Tenant Environment</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="configuring-the-multi-tenant-environment-d573e355" class="topicref" data-id="configuring-the-multi-tenant-environment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action configuring-the-multi-tenant-environment-d573e355-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mt_environment/config_mt_environ.html" id="configuring-the-multi-tenant-environment-d573e355-link">Configuring the Multi-Tenant environment</a></span></span></li><li role="treeitem" aria-expanded="true"><span data-tocid="configuring-mobile-for-the-multi-tenant-environment-d573e403" class="topicref" data-id="configuring-mobile-for-the-multi-tenant-environment" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action configuring-mobile-for-the-multi-tenant-environment-d573e403-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/config_mobile_mt_environ.html" id="configuring-mobile-for-the-multi-tenant-environment-d573e403-link">Configuring Mobile for the Multi-Tenant environment</a></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><span data-tocid="using-the-connections-mobile-app-d573e411" class="topicref" data-id="using-the-connections-mobile-app" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/using_mobile_appconfig_mt.html" id="using-the-connections-mobile-app-d573e411-link">Using the Connections Mobile app</a></span></span></li><li role="treeitem" aria-expanded="true"><span data-tocid="administering-connections-mobile-d573e419" class="topicref" data-id="administering-connections-mobile" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action administering-connections-mobile-d573e419-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/admin_mobile_mt.html" id="administering-connections-mobile-d573e419-link">Administering Connections Mobile</a></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><span data-tocid="setting-up-keycloak-for-connections-mobile-d573e427" class="topicref" data-id="setting-up-keycloak-for-connections-mobile" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/setting_up_keycloak%20_mobile_mt.html" id="setting-up-keycloak-for-connections-mobile-d573e427-link">Setting up KeyCloak for Connections Mobile</a></span></span></li><li role="treeitem"><span data-tocid="authentication-and-tokens-d573e435" class="topicref" data-id="authentication-and-tokens" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/authentication_tokens_mobile_mt.html" id="authentication-and-tokens-d573e435-link">Authentication and Tokens</a></span></span></li><li role="treeitem" class="active"><span data-tocid="using-keycloak-identity-providers-with-mobile-and-plugins-d573e443" class="topicref" data-id="using-keycloak-identity-providers-with-mobile-and-plugins" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/using_keycloak_identity_providers_mobile_plugins_mt.html" id="using-keycloak-identity-providers-with-mobile-and-plugins-d573e443-link">Using Keycloak Identity Providers with Mobile and Plugins</a></span></span></li></ul></li><li role="treeitem"><span data-tocid="configuring-desktop-plugins-for-the-multi-tenant-environment-d573e451" class="topicref" data-id="configuring-desktop-plugins-for-the-multi-tenant-environment" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/config_desktop_plugins_environ_mobile_mt.html" id="configuring-desktop-plugins-for-the-multi-tenant-environment-d573e451-link">Configuring Desktop Plugins for the Multi-Tenant environment</a></span></span></li><li role="treeitem"><span data-tocid="october-2020-mt-fixpack-mt-customers-should-update-mobile-configxml-d573e459" class="topicref" data-id="october-2020-mt-fixpack-mt-customers-should-update-mobile-configxml" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/october_2020_mt__fixpack_mobile_mt.html" id="october-2020-mt-fixpack-mt-customers-should-update-mobile-configxml-d573e459-link">October, 2020 MT fixpack, MT customers should update mobile-config.xml</a></span></span></li><li role="treeitem"><span data-tocid="configuring-sametime-for-the-multi-tenant-environment-d573e467" class="topicref" data-id="configuring-sametime-for-the-multi-tenant-environment" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/configuring_mobile_mt_environment/config_sametime_environ_mobile_mt.html" id="configuring-sametime-for-the-multi-tenant-environment-d573e467-link">Configuring Sametime for the Multi-Tenant environment</a></span></span></li></ul></li><li role="treeitem" aria-expanded="false"><span data-tocid="importing-data-d573e475" class="topicref" data-id="importing-data" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action importing-data-d573e475-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/importing_data/importing_data.html" id="importing-data-d573e475-link">Importing Data</a></span></span></li><li role="treeitem"><span data-tocid="tocId-d573e524" class="topicref" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="https://help.hcltechsw.com/connectionscloud/HCL+MT+CH-MSP+Product+Documentation/Importing+Databases+-+Post+Import+Steps+-+Populating+OM.pdf" id="tocId-d573e524-link">Importing Databases - Post Import Steps - Populating OM</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="managing-external-user-access-d573e531" class="topicref" data-id="managing-external-user-access" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action managing-external-user-access-d573e531-link" class="wh-expand-btn"></span><span class="title"><a href="../../v65/managing_external_users/man_ext_users_overview.html" id="managing-external-user-access-d573e531-link">Managing external user access</a></span></span></li><li role="treeitem"><span data-tocid="provisioning-apis-d573e555" class="topicref" data-id="provisioning-apis" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v65/provisioing_apis/provisioning_apis.html" id="provisioning-apis-d573e555-link">Provisioning APIs</a></span></span></li><li role="treeitem"><span data-tocid="tocId-d573e563" class="topicref" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="https://help.hcltechsw.com/connectionscloud/HCL+MT+CH-MSP+Product+Documentation/Additional+Information.pdf" id="tocId-d573e563-link">Additional Information</a></span></span></li><li role="treeitem"><span data-tocid="tocId-d573e570" class="topicref" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="https://help.hcltechsw.com/connectionscloud/HCL+MT+CH-MSP+Product+Documentation/Troubleshooting.pdf" id="tocId-d573e570-link">Troubleshooting</a></span></span></li><li role="treeitem"><span data-tocid="tocId-d573e577" class="topicref" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="https://help.hcltechsw.com/connectionscloud/HCL+MT+CH-MSP+Product+Documentation/Keycloak+Authentication+and+SSO.pdf" id="tocId-d573e577-link">Keycloak Authentication and SSO</a></span></span></li></ul></li></ul></div>
                        </nav>
                        
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-12" id="wh_topic_body">
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">Using Keycloak Identity Providers with Mobile and Plugins</h1><div class="- topic/body body"><p class="- topic/p p">When the Connections Mobile and Connections Plugin applications request OAuth tokens from Keycloak, they will first authenticate the user by calling the Keycloak authentication endpoint. By default, Keycloak will display a user login form and optionally will provide a list of Identity Providers for which this user could choose to authenticate. However, in a Multi-Tenant environment, the tenant provider should either customize the login form to make it specific for this particular tenant that is logging in, or possibly route the login request to a tenant specific Identity Provider, which would perform the authentication of the user. In either of the cases however, Keycloak will need some sort of hint from the login request to understand which "tenant" this login should apply.</p><p class="- topic/p p">By default, there is no tenant information such as the hostname of the tenant embedded within the auth request made from the client apps to Keycloak. The apps make a REST call directly to the Keycloak server and provide only the minimum required information needed by an OAuth provider. For example, the apps would make a call similar to the following:</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>https://login.example.com/auth/realms/connmt/protocol/openid-connect/auth? response_type=code&amp;code_challenge_method=S256&amp;scope=openid%20offline_access&amp;code_challenge=9aE4DTOwWk66U8Hh2k1TpSBelWggFnroXEkRmIbAAVY&amp;redirect_uri=com.ibm.ibmscp://com.ibm.mobile.connections/token&amp;client_id=connections_social_mobile&amp;state=Q5t9rXggFR7VB0HyYOL2b_- vFMLlHPiO9OGRUE6O5a0</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong>  Keycloak recognizes a Keycloak unique parameter called kc_idp_hint. If Keycloak detects this parameter, it checks the value against its list of Identity Provider aliases, and if a match is found, the login request will skip the Keycloak login form and be routed directly to that identity provider.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Solution</strong></p><p class="- topic/p p">The Connections mobile server, mobile apps and plugins support additional custom parameters on the OAuth authentication URL.</p><p class="- topic/p p">These parameters must be added to the mobile-config.xml file on the Connections server, and then will be discovered by each of the applications during their login process. This XML comment describes the OAuthAuthorizationURL_Parameter value:</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;!-- OAuthAuthorizationURL_Parameters: Optional. If custom request parameters are required on the OAuthAuthorizationURL request, add the parameters here. The mobile and plugins apps will append these parameters when requesting app and user authorization.
Separate parameters using the "&amp;amp;" string. This will be converted to a single "&amp;" when used by the client apps.</code></pre><p class="- topic/p p">Parameter values support the following substitution tokens. If these tokens are used as part of the value for a given parameter, they will be replaced with a dynamic value at runtime. Supported substitution tokens:</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">{MT_HOSTNAME} = The fully qualified tenant specific hostname for this instance. For example, "tenant.example.com".</p></li><li class="- topic/li li"><p class="- topic/p p">{MT_ORGNAME} = The tenant org name for this instance. For example, if the MT_HOSTNAME is "tenant.example.com", the</p></li></ul><p class="- topic/p p">For example:
&lt;OAuthAuthorizationURL_Parameters&gt;parameter1=value1&amp;parameter2={MT_ORGNAME}&lt;/OAuthAuthorizationURL_Parameters&gt;</p><p class="- topic/p p">The parameter name that is added could be something generic like mt_hostname={MT_HOSTNAME} or mt_org={MT_ORGNAME}. Or, if you are already assigning an Identity provider alias in Keycloak that exactly matches the tenant org name, then you could directly add the parameter <strong class="+ topic/ph hi-d/b ph b">kc_idp_hint=
{MT_ORGNAME}</strong>. With this approach, there would not be a requirement for an NGINX or edge proxy rule to manipulate the tenant identity to the proper value required for kc_idp_hint.</p><p class="- topic/p p">To add tenant specific information to the authentication request, follow these steps:</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">On the Connections server, edit the mobile-config.xml file located in the DMgr profile. Typically this file structure would be similar to /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/config/cells/mtdemo1Cell01/LotusConnections-config.</p></li><li class="- topic/li li"><p class="- topic/p p">Find the key in the file called <em class="+ topic/ph hi-d/i ph i">OAuthLogoutURL</em>. Add a new line here and insert the following section. Note that the value is just an example and should be customized to your environment.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">OAuthAuthorizationURL_Parameters mt_org={MT_ORGNAME}/OAuthAuthorizationURL_Parameters</em></p></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Save the file</p></li><li class="- topic/li li"><p class="- topic/p p">Perform a Full Synchronization for all nodes using the WebSphere admin console</p></li><li class="- topic/li li"><p class="- topic/p p">Restart the mobile application using the WebSphere admin console</p></li></ol><p class="- topic/p p">If you are using the parameter kc_idp_hint directly, then no further steps should be necessary on the Keycloak side. However, if your Keycloak alias naming convention does not match the customer org name and/or you are using a different parameter name, it may be necessary to add an NGINX or proxy rule to modify the incoming auth requests.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Verifying the changes</strong>
Once the changes have been made, do the following:</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Using a desktop browser and the hostname of one of your tenants, open this URL: https://tenant_org_hostname/mobile/homepage/SecurityConfiguration?debug=true Verify that the returned JSON includes the correct key and value for OAuthAuthorizationURL_Parameters.</p></li><li class="- topic/li li"><p class="- topic/p p">Once #1 is checked, login to this tenant using a Connections Mobile app or Connections desktop plugin application to verify login works properly.</p></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">IMPORTANT</strong>
The behavior described in this article requires the Connections Mobile app version 6.5.5 or later, or the Connections plugins from late June 2020.</p></div></article></main></div>
                        
                        
                        
                        
                        
                        
                        
                    </div>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer" whc:version="23.1">
  <div class=" footer-container mx-auto ">
    <div>
    <div class="footer">
        <ul class="nav justify-content-center">
            <li class="nav-item">
                <a class="nav-link footer-launch" style="color:white;" target="_blank" href="https://www.hcltechsw.com/wps/portal/legal/disclaimer">Disclaimer</a>
            </li>
            <li class="nav-item">
                <a class="nav-link footer-launch" style="color:white;" target="_blank" href="https://www.hcltechsw.com/wps/portal/legal/privacy">Privacy</a>
            </li>
            <li class="nav-item">
                <a class="nav-link footer-launch" style="color:white;" target="_blank" href="https://www.hcltechsw.com/wps/portal/legal/terms-use">Terms of use</a>
            </li>
         </ul>
    </div>
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" alt="" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>