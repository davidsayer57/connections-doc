
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us" whc:version="22.0">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="description" content="Note: The dotted line from connections to LDAP is not required for authentication. It may be used for group support from application level. Although it should really be done using keycloak APIs, the ..." /><meta charset="UTF-8" /><meta name="DC.rights.owner" content="(C) Copyright 2021" /><meta name="copyright" content="(C) Copyright 2021" /><meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" /><meta name="DC.relation" scheme="URI" content="../../v7/welcome/welcome_admin.html" /><meta name="DC.format" content="HTML5" /><meta name="DC.identifier" content="keycloak-authentication-and-sso" /><title>Keycloak Authentication and SSO</title><!--  Generated with Oxygen version 23.1, build number 2021030117.  --><meta name="wh-path2root" content="../../" /><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /C:\Users\david.sayer\Documents\GitHub-test\connections_cloud_mt\mt\temp\webhelp-responsive\oxygen_dita_temp\v7\keycloak_authentication_sso?&gt;&lt;?workdir-uri file:/C:/Users/david.sayer/Documents/GitHub-test/connections_cloud_mt/mt/temp/webhelp-responsive/oxygen_dita_temp/v7/keycloak_authentication_sso/?&gt;&lt;?path2project ..\..\?&gt;&lt;?path2project-uri ../../?&gt;&lt;?path2rootmap-uri ../../?&gt;&lt;topic xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;1.2&#34; domains=&#34;(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)&#34; id=&#34;keycloak-authentication-and-sso&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;topic:1;182:3&#34; specializations=&#34;&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;title:1;182:3&#34;&gt;Keycloak Authentication and SSO&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;body:1;182:3&#34;&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;keycloak_sso_overview.jpg&#34; placement=&#34;break&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:1;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;261&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:1;182:3&#34;&gt;keycloak_sso_overview.jpg&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:1;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:1;182:3&#34;&gt;Note:&lt;/b&gt; The dotted line from connections to LDAP is not required for authentication. It may be used for group support from application level. Although it should really be done using keycloak APIs, the existing code may be doing a direct LDAP call.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:2;182:3&#34;&gt;In MT, most of customers have their own IdP to authenticate users so Connections can SSO to customers own applications that use the same IdP.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:3;182:3&#34;&gt;We can use Keycloak to connect to customer Idp either via SAML or OIDC.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:4;182:3&#34;&gt;Identity Providers&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;id_providers.jpg&#34; placement=&#34;break&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:2;182:3&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;107&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:2;182:3&#34;&gt;id_providers.jpg&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:5;182:3&#34;&gt;By default, user would have to pick which login to use. However we can remove this page by redirect the user to their org's IdP.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:6;182:3&#34;&gt;This can be done by using &lt;xref class=&#34;- topic/xref &#34; href=&#34;https://www.keycloak.org/docs/latest/server_admin/#_client_suggested_idp&#34; format=&#34;html&#34; scope=&#34;external&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;xref:1;182:3&#34;&gt;&lt;?ditaot usertext?&gt;kc_idp_hint&lt;/xref&gt;.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:7;182:3&#34;&gt;Because redirect URL contains org url, so we can create rewrite rule to map between org to their own IdP.&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;codeblock:1;182:3&#34;&gt;https://\ {KK}/realms/{RM}/protocol/openid-connect/auth?xxxxx&amp;amp;redirect_uri=https%3A%2F%2Fmtdemo1- orgc.cnx.cwp.pnp-hcl.com%3A443%2Foidcclient_apps%2Fkeycloak&amp;amp;yyyyy &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:8;182:3&#34;&gt;to&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;codeblock:2;182:3&#34;&gt;https://\{KK} /realms/{RM}/protocol/openid-connect/auth?xxxxx&amp;amp;redirect_uri=https%3A%2F%2Fmtdemo1-orgc.cnx.cwp.pnp- hcl.com%3A443%2Foidcclient_apps%2Fkeycloak&amp;amp;yyyyy&amp;amp;kc_idp_hint=mtdemo1-orgc &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:9;182:3&#34;&gt;Example implementation:&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;codeblock:3;182:3&#34;&gt;if ($arg_redirect_uri ~ ^(https.*connmt-orge.*)){ rewrite ^(/auth/.*)/Azure-OIDC/(\w+\.?.*$) $1/Azure-OIDC/$2?kc_idp_hint=google break; } if ($arg_redirect_uri ~ ^(https.*connmt-orgf.*)){ rewrite ^(/auth/.*)/Azure-OIDC/(\w+\.?.*$) $1/Azure-OIDC/$2?kc_idp_hint=connmt-orgf break; } &lt;/codeblock&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;activities&#34; xtrc=&#34;topicref:17;39:88&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/mt_v7_md.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../../v7/welcome/welcome_admin.dita&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:2;17:65&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/mt_v7_md.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;HCL Connections MT v7.0 CH MSP Product Documentation&lt;/linktext&gt;&lt;?ditaot genshortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;Welcome to the HCL Connections MT CH MSP Product Documentation site. HCL Connections is social networking software designed for the workplace. Its features help you to establish dynamic networks that connect you to the people and information you need to achieve your business goals.&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;1.2&#34; domains=&#34;(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)&#34; id=&#34;configure-keycloak-as-oidc-provider-for-connections&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;topic:2;182:3&#34; specializations=&#34;&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;title:2;182:3&#34;&gt;Configure KeyCloak as OIDC provider for Connections&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;body:2;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:10;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:2;182:3&#34;&gt;Create client for Connections web client&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:1;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:1;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:11;182:3&#34;&gt;Create a realm&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:2;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:12;182:3&#34;&gt;Connect to the LDAP that contains all Connections users Create an OIDC client, type: confidential&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:3;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:13;182:3&#34;&gt;In Mapper add properties name: realmName, hardcode the value as your realm name&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:14;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:3;182:3&#34;&gt;Note:&lt;/b&gt; You can add the mapper in the client scope so it will be available to all clients in the same realm including web, mobile, desktop, conn-ee, conn-rte, and 3rd party clients.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;realmname_3.jpg&#34; placement=&#34;break&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:3;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;342&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:3;182:3&#34;&gt;realmname_3.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:4;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:15;182:3&#34;&gt;call back urls&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:2;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:5;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:16;182:3&#34;&gt;https://&lt;connections class=&#34;- topic/connections &#34; host=&#34;&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;connections:1;182:3&#34;&gt;/oidcclient/&amp;lt;provider_1.identifier value&amp;gt;&lt;/connections&gt;&lt;/p&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:6;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:17;182:3&#34;&gt;For MT also add each org's url:&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:3;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:7;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:18;182:3&#34;&gt;https://&lt;connections class=&#34;- topic/connections &#34; host=&#34;&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;connections:2;182:3&#34;&gt;_orga/oidcclient/&amp;lt;provider_1.identifier value&amp;gt;&lt;/connections&gt;&lt;/p&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:8;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:19;182:3&#34;&gt;https://&lt;connections class=&#34;- topic/connections &#34; host=&#34;&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;connections:3;182:3&#34;&gt;_orgb/oidcclient/&amp;lt;provider_1.identifier value&amp;gt;&lt;/connections&gt;&lt;/p&gt;&lt;/li&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/li&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:20;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:4;182:3&#34;&gt;Create client for Connections Mobile client&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:21;182:3&#34;&gt;In the same realm, create another client for Connections Mobile&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;cnx_mobile_4.jpg&#34; placement=&#34;break&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:4;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;418&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:4;182:3&#34;&gt;cnx_mobile_4.jpg&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:22;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:5;182:3&#34;&gt;SSO between Connections, SameTime and Domino can be done via Keycloak&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:23;182:3&#34;&gt;All apps should be in the same realm&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:24;182:3&#34;&gt;Create a client for each app&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:25;182:3&#34;&gt;The client for SameTime: use IdP initiated Post binding with signed assertion:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:26;182:3&#34;&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;keycloak_5.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:5;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;391&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:5;182:3&#34;&gt;keycloak_5.jpg&lt;/alt&gt;&lt;/image&gt; &lt;image class=&#34;- topic/image &#34; href=&#34;keycloak_6.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:6;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;282&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:6;182:3&#34;&gt;keycloak_6.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:27;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:6;182:3&#34;&gt;Configure KeyCloak to connect to an LDAP&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;keycloak_ldap_7.jpg&#34; placement=&#34;break&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:7;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;402&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:7;182:3&#34;&gt;keycloak_ldap_7.jpg&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:28;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:7;182:3&#34;&gt;Configure WAS as OIDC RP&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:4;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:9;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:29;182:3&#34;&gt;Install OIDC RP via WAS admin command follow websphere&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:10;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:30;182:3&#34;&gt;Documentation configure OIDC TAI properties&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:31;182:3&#34;&gt;excludedpathFilter: /ibm/console,/ibm/console/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:1;182:3&#34;&gt;,/profiles/dsx/.&lt;/i&gt;,/communities/dsx/.*,/dm,/dm/atom/seedlist,/dm/atom/communities/feed,/activities/service/atom2/forms/communityEvent,/communities/recomm/handleEvent,/communities/calendar/handleEvent,/profiles/seedlist/myserver&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:32;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:8;182:3&#34;&gt;Note:&lt;/b&gt; the services path may not be the same per deployment.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:33;182:3&#34;&gt;To support JWT as access token for oauth add the following:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:34;182:3&#34;&gt;provider_1.verifyIssuerInIat=true&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:35;182:3&#34;&gt;connmt is the client id for Connections web.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:36;182:3&#34;&gt;Connections_social_mobile is the client id for Connections Mobile&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:37;182:3&#34;&gt;To support Mobile/oauth2 client also be able to use session cookie, added:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:38;182:3&#34;&gt;provider_1.setLtpaCookie=true&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_8.jpg&#34; placement=&#34;break&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:8;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;317&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:8;182:3&#34;&gt;was_oidc_8.jpg&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:39;182:3&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;b:9;182:3&#34;&gt;Configure WAS as OIDC RP in multi-clusters env&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:40;182:3&#34;&gt;Connections medium and large deployment consists of multiple clusters (JVMs) and each contain a number of applications.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:41;182:3&#34;&gt;Due to limitation of WebSphere OIDC RP, the RP stores the state in local JVM, hence the callback has to return to the same JVMs where application login started. We have the following request into IBM to fix this issue: https://www.ibm.com/developerworks/rfe/execute?use_case=viewRfe&amp;amp;CR_ID=104320 Please help by voting for it.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:42;182:3&#34;&gt;Here is the workaround:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ol:1;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:11;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:43;182:3&#34;&gt;Deploy OIDC_RP ear to each JVM/cluster with unique context root. &lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_multi_cluster_9.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:9;182:3&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;570&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:9;182:3&#34;&gt;was_oidc_multi_cluster_9.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:12;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:44;182:3&#34;&gt;Configure OIDC RP TAI with a provider for each cluster and intercept the apps with the corespondent provider. (note: all properties values are the same for each provider except the interceptedPathFilter and callbackServletContextPath)&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:5;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:13;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:45;182:3&#34;&gt;intercept path: (note in your environment the app may be deployed on different cluster and please adjust accordingly)&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:6;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:14;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:46;182:3&#34;&gt;provider_1..interceptedPathFilter: /push/.*&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:15;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:47;182:3&#34;&gt;provider_2.interceptedPathFilter:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:48;182:3&#34;&gt;/connections/bookmarklet/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:2;182:3&#34;&gt;,/connections/oauth/.&lt;/i&gt;,/connections/resources/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:3;182:3&#34;&gt;,/connections/config/.&lt;/i&gt;,/communities/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:4;182:3&#34;&gt;,/connections/proxy/.&lt;/i&gt;,/help/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:5;182:3&#34;&gt;,/xcc/.&lt;/i&gt;,/selfservice/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:6;182:3&#34;&gt;,/news/.&lt;/i&gt;,/profiles/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:7;182:3&#34;&gt;,/search/.&lt;/i&gt;,/socialsidebar/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:8;182:3&#34;&gt;,/touchpoint/.&lt;/i&gt;,/connections/thumbnail/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:9;182:3&#34;&gt;,/connections/opengraph/.&lt;/i&gt;,/oauth2/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:10;182:3&#34;&gt;,/connections/opensocial/.&lt;/i&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:16;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:49;182:3&#34;&gt;provider_3..interceptedPathFilter: /homepage/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:11;182:3&#34;&gt;,/moderation/.&lt;/i&gt;,/connections/rte/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:12;182:3&#34;&gt;,/connections/webeditors/.&lt;/i&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:17;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:50;182:3&#34;&gt;provider_4..interceptedPathFilter: /activities/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:13;182:3&#34;&gt;,/blogs/.&lt;/i&gt;,/dogear/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:14;182:3&#34;&gt;,/files/.&lt;/i&gt;,/forums/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:15;182:3&#34;&gt;,/metrics/.&lt;/i&gt;,/metricssc/&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:16;182:3&#34;&gt;,/mobile/.&lt;/i&gt;,/connections/filesync/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:17;182:3&#34;&gt;,/connections/filediff/.&lt;/i&gt;,/mobileAdmin/.&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;i:18;182:3&#34;&gt;,/storageproxy/.&lt;/i&gt;,/wikis/.* &lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_multi_cluster_10.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:10;182:3&#34; dita-ot:image-width=&#34;800&#34; dita-ot:image-height=&#34;402&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:10;182:3&#34;&gt;was_oidc_multi_cluster_10.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:18;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:51;182:3&#34;&gt;Enable custom dynacache.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;ul:7;182:3&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:19;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:52;182:3&#34;&gt;In oidc RP TAI properties add: jndiChaneName: &lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_multi_cluster_11.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:11;182:3&#34; dita-ot:image-width=&#34;400&#34; dita-ot:image-height=&#34;53&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:11;182:3&#34;&gt;was_oidc_multi_cluster_11.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:20;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:53;182:3&#34;&gt;Create a new object cache instance with the JNDI name match the one use in the TAI property above. replication Domain: ConnectionsReplicationDomain&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:54;182:3&#34;&gt;replication Type: both push and pull &lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_multi_cluster_12.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:12;182:3&#34; dita-ot:image-width=&#34;550&#34; dita-ot:image-height=&#34;358&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:12;182:3&#34;&gt;was_oidc_multi_cluster_12.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:21;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:55;182:3&#34;&gt;In each cluster (Apps, Infra, util, push) Dynamic chache service make sure cache replication is enabled and is using ConnectionsReplicaitonDomain. &lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_multi_cluster_13.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:13;182:3&#34; dita-ot:image-width=&#34;349&#34; dita-ot:image-height=&#34;188&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:13;182:3&#34;&gt;was_oidc_multi_cluster_13.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:22;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:56;182:3&#34;&gt;Update callbacks in keycloak with content root.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:23;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:57;182:3&#34;&gt;Custom properties, make sure remove both&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:58;182:3&#34;&gt;com.ibm.websphere.security.DeferTAItoSSO&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:59;182:3&#34;&gt;com.ibm.websphere.security.InvokeTAIbeforeSSO&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;li:24;182:3&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;p:60;182:3&#34;&gt;Set oauth2 tai filter to some dummy value so it won't intercept any request. e.g. &lt;image class=&#34;- topic/image &#34; href=&#34;was_oidc_multi_cluster_14.jpg&#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;image:14;182:3&#34; dita-ot:image-width=&#34;600&#34; dita-ot:image-height=&#34;143&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/C:/Users/david.sayer/AppData/Local/Temp/OxygenXMLTemp/ditaTemporaryOutputDir-ewl_vcw_wpb/t1/t2/t3/t4/t5/v7/keycloak_authentication_sso/keycloak_auth_sso.md&#34; xtrc=&#34;alt:14;182:3&#34;&gt;was_oidc_multi_cluster_14.jpg&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;" /><meta name="wh-source-relpath" content="v7/keycloak_authentication_sso/keycloak_auth_sso.md" /><meta name="wh-out-relpath" content="v7/keycloak_authentication_sso/keycloak_auth_sso.html" />
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css" />
    
    <link rel="stylesheet" href="../../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css" />
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/app/topic-page.css?buildId=2021030117" />
    
    
    <script type="text/javascript" src="../../oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"><!----></script>
    
    <script data-main="../../oxygen-webhelp/app/topic-page.js" src="../../oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="../../oxygen-webhelp/template/oxygen.css?buildId=2021030117" />
    <!-- Global site tag (gtag.js) - Google Analytics start-->
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-169645537-2" class="optanon-category-C0002-C0003-C0004-C0005"></script>
    <script type="text/plain" class="optanon-category-C0002">
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-169645537-2');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics end-->

    <script type="module" src="../../oxygen-webhelp/template/resources/js/custom-hcl.js"></script>
    <script type="module" src="../../oxygen-webhelp/template/resources/js/constants.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="${oxygen-webhelp-template-dir}/resources/css/custom-hcl.css" /> -->

    <!-- OneTrust Cookies Consent Notice start -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/99b8d579-c52a-43c9-ab7b-a35e60de7103/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="99b8d579-c52a-43c9-ab7b-a35e60de7103"></script>
    <script type="text/javascript">
        function OptanonWrapper() { }
    </script>
    <!-- OneTrust Cookies Consent Notice end -->

    <!-- twitter widget -->
    <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

    <body id="keycloak-authentication-and-sso" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        <nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="https://www.hcltechsw.com/wps/portal/hclsw-home" style="vertical-align: unset;">
        <img width="150" height="50" src="https://help.hcltechsw.com/assets/images/HCL_Software_Logo_White.svg" alt="HCL Logo" target="_blank" />
    </a>
    <a href="https://help.hcltechsw.com/">
        <span id="brandName" class="title" style="vertical-align: middle; font-size: 16px; color:#ffffff;">Product Documentation</span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" style="color:#ffffff;" href="https://support.hcltechsw.com/csm?id=csm_index">Customer Support</a>
            </li>
        </ul>
    </div>
</nav>
        
        
        <header class="navbar navbar-default wh_header" whc:version="23.1">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    
                    <div class=" wh_publication_title "><a href="../../index.html">HCL Connections Product Documentation  </a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                <button type="button" data-target="#wh_top_menu_and_indexterms_link" id="wh_menu_mobile_button" data-toggle="collapse" class="navbar-toggler collapsed wh_toggle_button" aria-expanded="false" aria-label="Toggle menu" aria-controls="wh_top_menu_and_indexterms_link">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                <nav class=" wh_top_menu " aria-label="Menu Container"><ul xmlns:xhtml="http://www.w3.org/1999/xhtml" role="menubar" aria-label="Menu"><li role="menuitem" aria-haspopup="true" aria-expanded="false" class="has-children"><span id="kc_welcome-d593e29-mi" data-tocid="kc_welcome-d593e29" data-state="not-ready" class=" topicref " data-id="kc_welcome"><span class="title"><a href="../../v7/welcome/welcome_admin.html">HCL Connections MT v7.0 CH MSP Product Documentation</a></span></span></li><li role="menuitem" aria-haspopup="true" aria-expanded="false" class="has-children"><span id="kc_welcome-d593e272-mi" data-tocid="kc_welcome-d593e272" data-state="not-ready" class=" topicref " data-id="kc_welcome"><span class="title"><a href="../../v65/welcome_65/welcome_admin.html">HCL Connections MT v6.5 CH MSP Product Documentation</a></span></span></li></ul></nav>
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <!-- Search form -->
        <div xmlns:oxyf="http://www.oxygenxml.com/functions" xmlns="" class="custom-search-component"><div xmlns="http://www.w3.org/1999/xhtml" class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required" /><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div></form>
            
            
            
        </div><div xmlns="http://www.w3.org/1999/xhtml" class="after-search">
    <div class="version-container">
        <select id="versions" class="custom-select custom-select-md lang-selector" data-toggle="tooltip" title="Select a version">
        </select>
    </div>
    <div class="language-container">
      <!--  <label class="lang-label" for="languages">Language:</label> -->
        <select id="languages" class="custom-select custom-select-md lang-selector" data-toggle="tooltip" title="Select a language">
        </select>  
    </div>
</div></div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol xmlns:html="http://www.w3.org/1999/xhtml" class="d-print-none"><li><span class="home"><a href="../../index.html"><span>Home</span></a></span></li><li><span class="topicref" data-id="kc_welcome"><span class="title"><a href="../../v7/welcome/welcome_admin.html">HCL Connections MT v7.0 CH MSP Product Documentation</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">Welcome to the HCL Connections MT CH MSP Product     Documentation site. HCL Connections is social networking software designed for the workplace.     Its features help you to establish dynamic networks that connect you to the people and     information you need to achieve your business goals.</p></span></span></span></li><li class="active"><span class="topicref" data-id="keycloak-authentication-and-sso"><span class="title"><a href="../../v7/keycloak_authentication_sso/keycloak_auth_sso.html">Keycloak Authentication and SSO</a></span></span></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader">
  </span></div>
                        
                        <!-- External resource link -->
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <!-- Expand/Collapse publishing TOC 
                             The menu button for mobile devices is copied in the output only when the publication TOC is available
                        -->
                        <button type="button" data-target="#wh_publication_toc" id="wh_toc_button" data-toggle="collapse" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        
                        <nav id="wh_publication_toc" class="collapse col-lg-3 col-md-3 col-sm-12 d-md-block d-print-none" aria-label="Table of Contents Container">
                            <div class=" wh_publication_toc " data-tooltip-position="hidden"><ul role="tree" aria-label="Table of Contents"><span class="expand-button-action-labels"><span id="button-expand-action" aria-label="Expand"></span><span id="button-collapse-action" aria-label="Collapse"></span><span id="button-pending-action" aria-label="Pending"></span></span><li role="treeitem" aria-expanded="true"><span data-tocid="kc_welcome-d593e29" class="topicref" data-id="kc_welcome" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action kc_welcome-d593e29-link" class="wh-expand-btn"></span><span class="title"><a href="../../v7/welcome/welcome_admin.html" id="kc_welcome-d593e29-link">HCL Connections MT v7.0 CH MSP Product Documentation</a><span class="wh-tooltip"><p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">Welcome to the HCL Connections MT CH MSP Product     Documentation site. HCL Connections is social networking software designed for the workplace.     Its features help you to establish dynamic networks that connect you to the people and     information you need to achieve your business goals.</p></span></span></span><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><span data-tocid="tocId-d593e40" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d593e40-link" class="wh-expand-btn"></span><span class="title"><a href="../../v7/overview/welcome.html" id="tocId-d593e40-link">Welcome</a></span></span></li><li role="treeitem"><span data-tocid="updating-hcl-connections-70-with-the-latest-interim-fix-d593e80" class="topicref" data-id="updating-hcl-connections-70-with-the-latest-interim-fix" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v7/downloading/HCL%20MT%20CH-MSP%20Downloading%20HCL%20Connections%20Multi-Tenant%20packages%20and%20Monthly%20releases.html" id="updating-hcl-connections-70-with-the-latest-interim-fix-d593e80-link">Updating HCL Connections™ 7.0 with the latest interim fix</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="upgrading-mt-via-side-by-side-migration-d593e88" class="topicref" data-id="upgrading-mt-via-side-by-side-migration" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action upgrading-mt-via-side-by-side-migration-d593e88-link" class="wh-expand-btn"></span><span class="title"><a href="../../v7/migrating/mt_side_by_side_upgrade.html" id="upgrading-mt-via-side-by-side-migration-d593e88-link">Upgrading MT via Side by Side Migration</a></span></span></li><li role="treeitem"><span data-tocid="updating-configuration-files-via-hcl-autodeploy-d593e128" class="topicref" data-id="updating-configuration-files-via-hcl-autodeploy" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v7/updating_config_files_via_autodeploy/updating_config_files_via_autodeploy.html" id="updating-configuration-files-via-hcl-autodeploy-d593e128-link">Updating configuration files via HCL AutoDeploy</a></span></span></li><li role="treeitem"><span data-tocid="providing-ldap-group-support-for-the-org-admin-role-in-mt-d593e136" class="topicref" data-id="providing-ldap-group-support-for-the-org-admin-role-in-mt" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v7/ldap_group/providing_ldap_group_support.html" id="providing-ldap-group-support-for-the-org-admin-role-in-mt-d593e136-link">Providing LDAP Group Support for the org-admin role in MT</a></span></span></li><li role="treeitem"><span data-tocid="provisioning-apis-for-v70-d593e144" class="topicref" data-id="provisioning-apis-for-v70" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v7/provisioing_apis_7/provisioning_apis_7.html" id="provisioning-apis-for-v70-d593e144-link">Provisioning APIs for v7.0</a></span></span></li><li role="treeitem" class="active"><span data-tocid="keycloak-authentication-and-sso-d593e152" class="topicref" data-id="keycloak-authentication-and-sso" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v7/keycloak_authentication_sso/keycloak_auth_sso.html" id="keycloak-authentication-and-sso-d593e152-link">Keycloak Authentication and SSO</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="managing-external-user-access-d593e160" class="topicref" data-id="managing-external-user-access" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action managing-external-user-access-d593e160-link" class="wh-expand-btn"></span><span class="title"><a href="../../v7/managing_external_users/man_ext_users_overview.html" id="managing-external-user-access-d593e160-link">Managing external user access</a></span></span></li><li role="treeitem" aria-expanded="false"><span data-tocid="configuring-mt-v70-features-d593e184" class="topicref" data-id="configuring-mt-v70-features" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action configuring-mt-v70-features-d593e184-link" class="wh-expand-btn"></span><span class="title"><a href="../../v7/configuringv7features/config_v7_features.html" id="configuring-mt-v70-features-d593e184-link">Configuring MT v7.0 Features</a></span></span></li><li role="treeitem"><span data-tocid="troubleshooting-d593e256" class="topicref" data-id="troubleshooting" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="../../v7/troubleshooting/troubleshooting.html" id="troubleshooting-d593e256-link">Troubleshooting</a></span></span></li></ul></li></ul></div>
                        </nav>
                        
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-12" id="wh_topic_body">
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">Keycloak Authentication and SSO</h1><div class="- topic/body body"><br /><img class="- topic/image image" src="keycloak_sso_overview.jpg" alt="keycloak_sso_overview.jpg" /><br /><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong> The dotted line from connections to LDAP is not required for authentication. It may be used for group support from application level. Although it should really be done using keycloak APIs, the existing code may be doing a direct LDAP call.</p><p class="- topic/p p">In MT, most of customers have their own IdP to authenticate users so Connections can SSO to customers own applications that use the same IdP.</p><p class="- topic/p p">We can use Keycloak to connect to customer Idp either via SAML or OIDC.</p><p class="- topic/p p">Identity Providers</p><br /><img class="- topic/image image" src="id_providers.jpg" alt="id_providers.jpg" /><br /><p class="- topic/p p">By default, user would have to pick which login to use. However we can remove this page by redirect the user to their org's IdP.</p><p class="- topic/p p">This can be done by using <a class="- topic/xref xref" href="https://www.keycloak.org/docs/latest/server_admin/#_client_suggested_idp" target="_blank" rel="external noopener">kc_idp_hint</a>.</p><p class="- topic/p p">Because redirect URL contains org url, so we can create rewrite rule to map between org to their own IdP.</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>https://\

{KK}/realms/{RM}/protocol/openid-connect/auth?xxxxx&amp;redirect_uri=https%3A%2F%2Fmtdemo1- orgc.cnx.cwp.pnp-hcl.com%3A443%2Foidcclient_apps%2Fkeycloak&amp;yyyyy
</code></pre><p class="- topic/p p">to</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>https://\{KK}

/realms/{RM}/protocol/openid-connect/auth?xxxxx&amp;redirect_uri=https%3A%2F%2Fmtdemo1-orgc.cnx.cwp.pnp-
hcl.com%3A443%2Foidcclient_apps%2Fkeycloak&amp;yyyyy&amp;kc_idp_hint=mtdemo1-orgc
</code></pre><p class="- topic/p p">Example implementation:</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>if ($arg_redirect_uri ~ ^(https.*connmt-orge.*)){
rewrite ^(/auth/.*)/Azure-OIDC/(\w+\.?.*$) $1/Azure-OIDC/$2?kc_idp_hint=google break;
}
if ($arg_redirect_uri ~ ^(https.*connmt-orgf.*)){
rewrite ^(/auth/.*)/Azure-OIDC/(\w+\.?.*$) $1/Azure-OIDC/$2?kc_idp_hint=connmt-orgf break;
     }
</code></pre></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="configure-keycloak-as-oidc-provider-for-connections"><h2 class="- topic/title title topictitle2" id="ariaid-title2">Configure KeyCloak as OIDC provider for Connections</h2><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Create client for Connections web client</strong></p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Create a realm</p></li><li class="- topic/li li"><p class="- topic/p p">Connect to the LDAP that contains all Connections users Create an OIDC client, type: confidential</p></li><li class="- topic/li li"><p class="- topic/p p">In Mapper add properties name: realmName, hardcode the value as your realm name</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong> You can add the mapper in the client scope so it will be available to all clients in the same realm including web, mobile, desktop, conn-ee, conn-rte, and 3rd party clients.</p><br /><img class="- topic/image image" src="realmname_3.jpg" alt="realmname_3.jpg" /><br /></li><li class="- topic/li li"><p class="- topic/p p">call back urls</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">https://<span class="undefined_element">/oidcclient/&lt;provider_1.identifier value&gt;</span></p><li class="- topic/li li"><p class="- topic/p p">For MT also add each org's url:</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">https://<span class="undefined_element">_orga/oidcclient/&lt;provider_1.identifier value&gt;</span></p><li class="- topic/li li"><p class="- topic/p p">https://<span class="undefined_element">_orgb/oidcclient/&lt;provider_1.identifier value&gt;</span></p></li></li></ul></li></li><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Create client for Connections Mobile client</strong></p><p class="- topic/p p">In the same realm, create another client for Connections Mobile</p><br /><img class="- topic/image image" src="cnx_mobile_4.jpg" alt="cnx_mobile_4.jpg" /><br /><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">SSO between Connections, SameTime and Domino can be done via Keycloak</strong></p><p class="- topic/p p">All apps should be in the same realm</p><p class="- topic/p p">Create a client for each app</p><p class="- topic/p p">The client for SameTime: use IdP initiated Post binding with signed assertion:</p><p class="- topic/p p"><img class="- topic/image image" src="keycloak_5.jpg" alt="keycloak_5.jpg" /><br />
<img class="- topic/image image" src="keycloak_6.jpg" alt="keycloak_6.jpg" /><br /></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Configure KeyCloak to connect to an LDAP</strong></p><br /><img class="- topic/image image" src="keycloak_ldap_7.jpg" alt="keycloak_ldap_7.jpg" /><br /><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Configure WAS as OIDC RP</strong></p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Install OIDC RP via WAS admin command follow websphere</p></li><li class="- topic/li li"><p class="- topic/p p">Documentation configure OIDC TAI properties</p></li></ul><p class="- topic/p p">excludedpathFilter:
/ibm/console,/ibm/console/.<em class="+ topic/ph hi-d/i ph i">,/profiles/dsx/.</em>,/communities/dsx/.*,/dm,/dm/atom/seedlist,/dm/atom/communities/feed,/activities/service/atom2/forms/communityEvent,/communities/recomm/handleEvent,/communities/calendar/handleEvent,/profiles/seedlist/myserver</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note:</strong> the services path may not be the same per deployment.</p><p class="- topic/p p">To support JWT as access token for oauth add the following:</p><p class="- topic/p p">provider_1.verifyIssuerInIat=true</p><p class="- topic/p p">connmt is the client id for Connections web.</p><p class="- topic/p p">Connections_social_mobile is the client id for Connections Mobile</p><p class="- topic/p p">To support Mobile/oauth2 client also be able to use session cookie, added:</p><p class="- topic/p p">provider_1.setLtpaCookie=true</p><br /><img class="- topic/image image" src="was_oidc_8.jpg" alt="was_oidc_8.jpg" /><br /><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Configure WAS as OIDC RP in multi-clusters env</strong></p><p class="- topic/p p">Connections medium and large deployment consists of multiple clusters (JVMs) and each contain a number of applications.</p><p class="- topic/p p">Due to limitation of WebSphere OIDC RP, the RP stores the state in local JVM, hence the callback has to return to the same JVMs where application login started. We have the following request into IBM to fix this issue: https://www.ibm.com/developerworks/rfe/execute?use_case=viewRfe&amp;CR_ID=104320
Please help by voting for it.</p><p class="- topic/p p">Here is the workaround:</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Deploy OIDC_RP ear to each JVM/cluster with unique context root.
<img class="- topic/image image" src="was_oidc_multi_cluster_9.jpg" alt="was_oidc_multi_cluster_9.jpg" /><br /></p></li><li class="- topic/li li"><p class="- topic/p p">Configure OIDC RP TAI with a provider for each cluster and intercept the apps with the corespondent provider. (note: all properties values are the same for each provider except the interceptedPathFilter and callbackServletContextPath)</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">intercept path: (note in your environment the app may be deployed on different cluster and please adjust accordingly)</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">provider_1..interceptedPathFilter: /push/.*</p></li><li class="- topic/li li"><p class="- topic/p p">provider_2.interceptedPathFilter:</p><p class="- topic/p p">/connections/bookmarklet/.<em class="+ topic/ph hi-d/i ph i">,/connections/oauth/.</em>,/connections/resources/.<em class="+ topic/ph hi-d/i ph i">,/connections/config/.</em>,/communities/.<em class="+ topic/ph hi-d/i ph i">,/connections/proxy/.</em>,/help/.<em class="+ topic/ph hi-d/i ph i">,/xcc/.</em>,/selfservice/.<em class="+ topic/ph hi-d/i ph i">,/news/.</em>,/profiles/.<em class="+ topic/ph hi-d/i ph i">,/search/.</em>,/socialsidebar/.<em class="+ topic/ph hi-d/i ph i">,/touchpoint/.</em>,/connections/thumbnail/.<em class="+ topic/ph hi-d/i ph i">,/connections/opengraph/.</em>,/oauth2/.<em class="+ topic/ph hi-d/i ph i">,/connections/opensocial/.</em></p></li><li class="- topic/li li"><p class="- topic/p p">provider_3..interceptedPathFilter: /homepage/.<em class="+ topic/ph hi-d/i ph i">,/moderation/.</em>,/connections/rte/.<em class="+ topic/ph hi-d/i ph i">,/connections/webeditors/.</em></p></li><li class="- topic/li li"><p class="- topic/p p">provider_4..interceptedPathFilter: /activities/.<em class="+ topic/ph hi-d/i ph i">,/blogs/.</em>,/dogear/.<em class="+ topic/ph hi-d/i ph i">,/files/.</em>,/forums/.<em class="+ topic/ph hi-d/i ph i">,/metrics/.</em>,/metricssc/<em class="+ topic/ph hi-d/i ph i">,/mobile/.</em>,/connections/filesync/.<em class="+ topic/ph hi-d/i ph i">,/connections/filediff/.</em>,/mobileAdmin/.<em class="+ topic/ph hi-d/i ph i">,/storageproxy/.</em>,/wikis/.*
<img class="- topic/image image" src="was_oidc_multi_cluster_10.jpg" alt="was_oidc_multi_cluster_10.jpg" /><br /></p></li></ul></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Enable custom dynacache.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">In oidc RP TAI properties add: jndiChaneName:
<img class="- topic/image image" src="was_oidc_multi_cluster_11.jpg" alt="was_oidc_multi_cluster_11.jpg" /><br /></p></li><li class="- topic/li li"><p class="- topic/p p">Create a new object cache instance with the JNDI name match the one use in the TAI property above. replication Domain: ConnectionsReplicationDomain</p><p class="- topic/p p">replication Type: both push and pull
<img class="- topic/image image" src="was_oidc_multi_cluster_12.jpg" alt="was_oidc_multi_cluster_12.jpg" /><br /></p></li><li class="- topic/li li"><p class="- topic/p p">In each cluster (Apps, Infra, util, push) Dynamic chache service make sure cache replication is enabled and is using ConnectionsReplicaitonDomain.
<img class="- topic/image image" src="was_oidc_multi_cluster_13.jpg" alt="was_oidc_multi_cluster_13.jpg" /><br /></p></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Update callbacks in keycloak with content root.</p></li><li class="- topic/li li"><p class="- topic/p p">Custom properties, make sure remove both</p><p class="- topic/p p">com.ibm.websphere.security.DeferTAItoSSO</p><p class="- topic/p p">com.ibm.websphere.security.InvokeTAIbeforeSSO</p></li><li class="- topic/li li"><p class="- topic/p p">Set oauth2 tai filter to some dummy value so it won't intercept any request. e.g.
<img class="- topic/image image" src="was_oidc_multi_cluster_14.jpg" alt="was_oidc_multi_cluster_14.jpg" /><br /></p></li></ol></ul></li></ul></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                        
                    </div>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer" whc:version="23.1">
  <div class=" footer-container mx-auto ">
    <div>
    <div class="footer">
        <ul class="nav justify-content-center">
            <li class="nav-item">
                <a class="nav-link footer-launch" style="color:white;" target="_blank" href="https://www.hcltechsw.com/wps/portal/legal/disclaimer">Disclaimer</a>
            </li>
            <li class="nav-item">
                <a class="nav-link footer-launch" style="color:white;" target="_blank" href="https://www.hcltechsw.com/wps/portal/legal/privacy">Privacy</a>
            </li>
            <li class="nav-item">
                <a class="nav-link footer-launch" style="color:white;" target="_blank" href="https://www.hcltechsw.com/wps/portal/legal/terms-use">Terms of use</a>
            </li>
         </ul>
    </div>
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" alt="" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>